<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>QUIPU API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <div class="main-logo">
        <img src="images/logo.svg" />
      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://getquipu.com'>Quipu</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to Quipu API.</p>

<p>Quipu is an invoice and taxes software as a service for freelances and companies.</p>

<p>Feel free to use our API and develop amazing things. To use our API you need to sign up in our software <a href="https://getquipu.com/en">here</a>.</p>

<p>You will have 15 days to try it for free. If you need more time just contact our support team and we will extend the days.</p>

<p>You can get more information about our API, libraries and other applications here: <a href="https://getquipu.com/en/integrations">https://getquipu.com/en/integrations</a>.</p>

<h2 id="rest-api-conventions">REST API Conventions</h2>

<p>The Quipu API is based on &hellip; <a href="http://jsonapi.org/">JSON API</a></p>

<p>All request should include the header <code class="prettyprint">Accept: application/vnd.quipu.v1+json</code>.</p>

<p>All POST, PUT and PATCH request must include the header <code class="prettyprint">Content-Type: application/vnd.quipu.v1+json</code>, except when specifically indicated otherwise.</p>

<h3 id="filtering">Filtering</h3>

<p>When fetching collections of resources you can use <code class="prettyprint">filter[filter_name]=filter_value</code> query params.</p>

<p>The available filters are detailed in each section.</p>

<p>Example:</p>

<p><code>GET /invoices?<strong>filter[period]=1Q-2015&amp;filter[kind]=income</strong></code></p>

<h3 id="sorting">Sorting</h3>

<p>When fetching some collections of resources you can use <code class="prettyprint">?sort=sort_criteria_1,sort_criteria_2,-sorting_criteria_3,...</code>, each sorting criteria separated with a comma.</p>

<p>The <code class="prettyprint">-</code> sign at the beggining of a sorting criteria means that the order for this criteria is descendant.</p>

<p>Example:</p>

<p><code>GET /invoices?<strong>sort=-issued_at,total_amount</strong> # =&gt; order_by issued_at desc, total_amount asc;</code></p>

<h2 id="rate-limiting">Rate limiting</h2>

<p>In order to guarantee a fair usage of the platform by all users, we set a maximum of 5 requests every 5 seconds (effectively 900 requests every 15 minutes), for a specific pair of credentials.</p>

<p>We implement the standard <code class="prettyprint">RateLimit</code> headers defined in section 3 of <a href="https://www.ietf.org/archive/id/draft-polli-ratelimit-headers-02.html">this document</a> so the API user can know the limit, how much usage there is left, and when will this usage be reset.</p>

<p>In the event that a request surpasses the allocated limit for that account, a 429 status code will be returned.</p>

<h2 id="endpoints-summary">Endpoints summary</h2>

<h3 id="contacts"><a href="#contacts-section">Contacts</a></h3>

<ul>
<li><code class="prettyprint">GET    /contacts</code></li>
<li><code class="prettyprint">POST   /contacts</code></li>
<li><code class="prettyprint">GET    /contacts/:id</code></li>
<li><code class="prettyprint">PATCH  /contacts/:id</code></li>
<li><code class="prettyprint">DELETE /contacts/:id</code></li>
</ul>

<h3 id="invoices-tickets-and-paysheets"><a href="#invoices-tickets-and-paysheets-section">Invoices, tickets and paysheets</a></h3>

<ul>
<li><code class="prettyprint">GET /book_entries</code></li>
</ul>

<h3 id="invoices"><a href="#invoices-section">Invoices</a></h3>

<ul>
<li><code class="prettyprint">GET    /invoices</code></li>
<li><code class="prettyprint">POST   /invoices</code></li>
<li><code class="prettyprint">GET    /invoices/:id</code></li>
<li><code class="prettyprint">PATCH  /invoices/:id</code></li>
<li><code class="prettyprint">DELETE /invoices/:id</code></li>
</ul>

<h3 id="tickets"><a href="#tickets-section">Tickets</a></h3>

<ul>
<li><code class="prettyprint">GET    /tickets</code></li>
<li><code class="prettyprint">POST   /tickets</code></li>
<li><code class="prettyprint">GET    /tickets/:id</code></li>
<li><code class="prettyprint">PATCH  /tickets/:id</code></li>
<li><code class="prettyprint">DELETE /tickets/:id</code></li>
</ul>

<h3 id="paysheets"><a href="#paysheets-section">Paysheets</a></h3>

<ul>
<li><code class="prettyprint">GET    /paysheets</code></li>
<li><code class="prettyprint">POST   /paysheets</code></li>
<li><code class="prettyprint">GET    /paysheets/:id</code></li>
<li><code class="prettyprint">PATCH  /paysheets/:id</code></li>
<li><code class="prettyprint">DELETE /paysheets/:id</code></li>
</ul>

<h3 id="numbering-series"><a href="#numbering-series-section">Numbering series</a></h3>

<ul>
<li><code class="prettyprint">GET    /numbering_series</code></li>
<li><code class="prettyprint">POST   /numbering_series</code></li>
<li><code class="prettyprint">GET    /numbering_series/:id</code></li>
<li><code class="prettyprint">PATCH  /numbering_series/:id</code></li>
<li><code class="prettyprint">DELETE /numbering_series/:id</code></li>
</ul>

<h3 id="analytic-categories"><a href="#analytic-categories-section">Analytic categories</a></h3>

<ul>
<li><code class="prettyprint">GET    /analytic_categories</code></li>
<li><code class="prettyprint">POST   /analytic_categories</code></li>
<li><code class="prettyprint">GET    /analytic_categories/:id</code></li>
<li><code class="prettyprint">PATCH  /analytic_categories/:id</code></li>
<li><code class="prettyprint">DELETE /analytic_categories/:id</code></li>
</ul>

<h3 id="accounting-categories"><a href="#accounting-categories-section">Accounting categories</a></h3>

<ul>
<li><code class="prettyprint">GET    /accounting_categories</code></li>
<li><code class="prettyprint">GET    /accounting_categories/:id</code></li>
</ul>

<h3 id="accounting-subcategories"><a href="#accounting-subcategories-section">Accounting subcategories</a></h3>

<ul>
<li><code class="prettyprint">GET    /accounting_subcategories</code></li>
<li><code class="prettyprint">POST   /accounting_subcategories</code></li>
<li><code class="prettyprint">GET    /accounting_subcategories/:id</code></li>
<li><code class="prettyprint">PATCH  /accounting_subcategories/:id</code></li>
<li><code class="prettyprint">DELETE /accounting_subcategories/:id</code></li>
</ul>

<h3 id="attachments"><a href="#attachments-section">Attachments</a></h3>

<ul>
<li><code class="prettyprint">POST   /attachments</code></li>
<li><code class="prettyprint">GET    /attachments/:id</code></li>
<li><code class="prettyprint">DELETE /attachments/:id</code></li>
</ul>

<h1 id="authentication">Authentication</h1>

<p>We use OAuth2 to authorize the requests.</p>

<h2 id="getting-an-access-token">Getting an access token</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/oauth/token"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Basic UHROeGZDc0drbGltRXJRcVZUZUFGRFVUVWpkTVZDcmpORklsclJlS..."</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/x-www-form-urlencoded;charset=UTF-8"</span> <span class="se">\</span>
  -d <span class="s2">"scope=ecommerce"</span> <span class="se">\</span>
  -d <span class="s2">"grant_type=client_credentials"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"token_type"</span>:    <span class="s2">"bearer"</span>,
  <span class="s2">"created_at"</span>:    1456339025,
  <span class="s2">"access_token"</span>:  <span class="s2">"7c74b8e69bdd19a90e1ffaf987ada2ca67b948b0bed7b2cf95ad58f5ecb14294"</span>,
  <span class="s2">"refresh_token"</span>: null,
  <span class="s2">"expires_in"</span>:    1456346225
<span class="o">}</span>
</code></pre>

<p>To get an access token you will need the account&rsquo;s <code class="prettyprint">app_id</code> and <code class="prettyprint">app_secret</code> credentials.</p>

<p>As is standard in basic access authentication, the header&rsquo;s structure corresponds to <code class="prettyprint">Authorization Basic credentials</code>, where <code class="prettyprint">credentials</code> is the result of:</p>

<ul>
<li>Joining <code class="prettyprint">app_id</code> and <code class="prettyprint">app_secret</code> by a single colon</li>
<li>Applying Base64 (URL safe mode) to the result</li>
</ul>

<p>Example:</p>

<ul>
<li>if <code class="prettyprint">app_id</code> were <code class="prettyprint">PtNxfCsGklimErQqVTeAFDUTUjdMVCrjNFIlrReIimSHKMoOaWxAxwHPNevbIwFV</code></li>
<li>and <code class="prettyprint">app_secret</code> were <code class="prettyprint">HRcqlIcHjYUWunjgVmAQiWYjbYFAGSoLhpXkHoGPhjdwQmXmRIxDQOQJOANpfnbD</code></li>
<li>then the header would be <code class="prettyprint">Authorization Basic UHROeGZDc0drbGltRXJRcVZUZUFGRFVUVWpkTVZDcmpORklsclJlSWltU0hLTW9PYVd4QXh3SFBOZXZiSXdGVjpIUmNxbEljSGpZVVd1bmpnVm1BUWlXWWpiWUZBR1NvTGhwWGtIb0dQaGpkd1FtWG1SSXhEUU9RSk9BTnBmbmJE</code></li>
</ul>

<aside class="notice">
  When a token expires you will need to request for a new one
</aside>

<h2 id="using-the-token-in-the-requests">Using the token in the requests</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/invoices"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

          <h1 id="contacts"><a name="contacts-section"></a>Contacts</h1>

<p>Endpoints to manage contacts</p>

<h2 id="listing-contacts">Listing contacts</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/contacts"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"45923"</span>,
    <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"PEPEMOBILE S.L."</span>,
      <span class="s2">"tax_id"</span>: <span class="s2">"ESB85033470"</span>,
      <span class="s2">"phone"</span>: <span class="s2">"999999999"</span>,
      <span class="s2">"email"</span>: <span class="s2">"pepe@phone.com"</span>,
      <span class="s2">"address"</span>: <span class="s2">"Paseo de la Castellana 8, 7-D"</span>,
      <span class="s2">"town"</span>: <span class="s2">"Madrid"</span>,
      <span class="s2">"zip_code"</span>: <span class="s2">"28046"</span>,
      <span class="s2">"country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"total_paid_incomes"</span>: <span class="s2">"13284.56"</span>,
      <span class="s2">"total_unpaid_incomes"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_incomes"</span>: <span class="s2">"13284.56"</span>,
      <span class="s2">"total_paid_expenses"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_unpaid_expenses"</span>: 0.0,
      <span class="s2">"total_expenses"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"client_number"</span>: <span class="s2">"6"</span>,
      <span class="s2">"supplier_number"</span>: null,
      <span class="s2">"is_client"</span>: <span class="nb">true</span>,
      <span class="s2">"is_supplier"</span>: <span class="nb">false</span>,
      <span class="s2">"is_employee"</span>: <span class="nb">false</span>,
      <span class="s2">"is_supplier_of_direct_goods"</span>: <span class="nb">false</span>,
      <span class="s2">"bank_account_number"</span>: <span class="s2">"ES92 3821 0601 2314 3339 5656"</span>,
      <span class="s2">"bank_account_swift_bic"</span>: <span class="s2">""</span>,
      <span class="s2">"deletable"</span>: <span class="nb">false</span>
    <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"45956"</span>,
    <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Amazon EU S.a.r.l., España"</span>,
      <span class="s2">"tax_id"</span>: <span class="s2">"ESW0184081H"</span>,
      <span class="s2">"phone"</span>: <span class="s2">"999999999"</span>,
      <span class="s2">"email"</span>: <span class="s2">""</span>,
      <span class="s2">"address"</span>: <span class="s2">"Via De Las Dos Castillas, 33, Atica Ed. 2"</span>,
      <span class="s2">"town"</span>: <span class="s2">"Pozuelo de Alarcón"</span>,
      <span class="s2">"zip_code"</span>: <span class="s2">"28224"</span>,
      <span class="s2">"country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"total_paid_incomes"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_unpaid_incomes"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_incomes"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_paid_expenses"</span>: <span class="s2">"263.15"</span>,
      <span class="s2">"total_unpaid_expenses"</span>: 0.0,
      <span class="s2">"total_expenses"</span>: <span class="s2">"263.15"</span>,
      <span class="s2">"client_number"</span>: null,
      <span class="s2">"supplier_number"</span>: 931,
      <span class="s2">"is_client"</span>: <span class="nb">false</span>,
      <span class="s2">"is_supplier"</span>: <span class="nb">true</span>,
      <span class="s2">"is_employee"</span>: <span class="nb">false</span>,
      <span class="s2">"is_supplier_of_direct_goods"</span>: <span class="nb">false</span>,
      <span class="s2">"bank_account_number"</span>: <span class="s2">"ES92 3821 0601 2314 3339 5656"</span>,
      <span class="s2">"bank_account_swift_bic"</span>: <span class="s2">""</span>,
      <span class="s2">"deletable"</span>: <span class="nb">false</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>

    ...

  <span class="o">}]</span>,
  meta: <span class="o">{</span>
    pagination_info: <span class="o">{</span>
      <span class="s2">"total_pages"</span>: 2
      <span class="s2">"current_page"</span>: 1
      <span class="s2">"total_results"</span>: 23
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /contacts</code></p>

<h3 id="available-filters">Available filters</h3>

<table><thead>
<tr>
<th>Filter name</th>
<th>Description</th>
<th>Valid values</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>q</td>
<td>Search by name</td>
<td>Any</td>
<td><code class="prettyprint">/contacts?filter[q]=amazon</code></td>
</tr>
<tr>
<td>kind</td>
<td>Filter contacts by kind</td>
<td><code class="prettyprint">employee</code>, <code class="prettyprint">supplier</code> and <code class="prettyprint">client</code></td>
<td><code class="prettyprint">contacts?filter[kind]=client</code></td>
</tr>
<tr>
<td>tax_id</td>
<td>Filter contacts by their tax id</td>
<td></td>
<td><code class="prettyprint">contacts?filter[tax_id]=43456628J</code></td>
</tr>
<tr>
<td>country</td>
<td>Filter contacts by one or many countries, separated by commas</td>
<td>any country code, in downcase, under the ISO 3166-1 Alpha-2</td>
<td><code class="prettyprint">contacts?filter[country]=es,it</code></td>
</tr>
<tr>
<td>email</td>
<td>Filter contacts by email</td>
<td>Any</td>
<td><code class="prettyprint">contacts?filter[email]=someemail@provider.domain</code></td>
</tr>
</tbody></table>

<h3 id="sorting">Sorting</h3>

<table><thead>
<tr>
<th>Criteria name</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>Sorts contacts by name</td>
<td><code class="prettyprint">/contacts?sort=name</code></td>
</tr>
<tr>
<td>total_paid_income</td>
<td>Sorts contacts by the amount of money they have paid to us</td>
<td><code class="prettyprint">/contacts?sort=-total_paid_income</code></td>
</tr>
<tr>
<td>total_unpaid_income</td>
<td>Sorts contacts by the amount of money they owe us</td>
<td><code class="prettyprint">/contacts?sort=total_unpaid_income</code></td>
</tr>
<tr>
<td>total_paid_expenses</td>
<td>Sorts contacts by the amount of money we have paid to them</td>
<td><code class="prettyprint">/contacts?sort=total_paid_expenses</code></td>
</tr>
<tr>
<td>total_unpaid_expenses</td>
<td>Sorts contacts by the amount of money we owe them</td>
<td><code class="prettyprint">/contacts?sort=-total_unpaid_expenses</code></td>
</tr>
</tbody></table>

<h3 id="pagination">Pagination</h3>

<p>20 contacts in every response. Total pages indicated by <code class="prettyprint">total_pages</code> in response <code class="prettyprint">meta</code> object.</p>

<p>You can request a specific page with a query param: <code class="prettyprint">GET /contacts?page[number]=7</code></p>

<h2 id="getting-a-contact">Getting a contact</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/contacts/45923"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"45923"</span>,
    <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"PEPEMOBILE S.L."</span>,
      <span class="s2">"tax_id"</span>: <span class="s2">"ESB85033470"</span>,
      <span class="s2">"phone"</span>: <span class="s2">"999999999"</span>,
      <span class="s2">"email"</span>: <span class="s2">"pepe@phone.com"</span>,
      <span class="s2">"address"</span>: <span class="s2">"Paseo de la Castellana 8, 7-D"</span>,
      <span class="s2">"town"</span>: <span class="s2">"Madrid"</span>,
      <span class="s2">"zip_code"</span>: <span class="s2">"28046"</span>,
      <span class="s2">"country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"total_paid_incomes"</span>: <span class="s2">"13284.56"</span>,
      <span class="s2">"total_unpaid_incomes"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_incomes"</span>: <span class="s2">"13284.56"</span>,
      <span class="s2">"total_paid_expenses"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_unpaid_expenses"</span>: 0.0,
      <span class="s2">"total_expenses"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"client_number"</span>: <span class="s2">"6"</span>,
      <span class="s2">"supplier_number"</span>: null,
      <span class="s2">"is_client"</span>: <span class="nb">true</span>,
      <span class="s2">"is_supplier"</span>: <span class="nb">false</span>,
      <span class="s2">"is_employee"</span>: <span class="nb">false</span>,
      <span class="s2">"is_supplier_of_direct_goods"</span>: <span class="nb">false</span>,
      <span class="s2">"bank_account_number"</span>: <span class="s2">"ES92 3821 0601 2314 3339 5656"</span>,
      <span class="s2">"bank_account_swift_bic"</span>: <span class="s2">""</span>,
      <span class="s2">"deletable"</span>: <span class="nb">false</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /contact/:contact_id</code></p>

<h2 id="creating-a-contact">Creating a contact</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/contacts"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "contacts",
          "attributes": {
            "name": "PEPEMOBILE S.L.",
            "tax_id": "ESB85033470",
            "phone": "999999999",
            "email": "pepe@phone.com",
            "address": "Paseo de la Castellana 8, 7-D",
            "town": "Madrid",
            "zip_code": "28046",
            "country_code": "es",
            "client_number": 6,
            "supplier_number": null,
            "is_supplier_of_direct_goods": false,
            "bank_account_number": "ES92 3821 0601 2314 3339 5656",
            "bank_account_swift_bic": ""
          }
        }
      }'</span>
</code></pre>

<blockquote>
<p>Example response (status: 204)</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"45923"</span>,
    <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"PEPEMOBILE S.L."</span>,
      <span class="s2">"tax_id"</span>: <span class="s2">"ESB85033470"</span>,
      <span class="s2">"phone"</span>: <span class="s2">"999999999"</span>,
      <span class="s2">"email"</span>: <span class="s2">"pepe@phone.com"</span>,
      <span class="s2">"address"</span>: <span class="s2">"Paseo de la Castellana 8, 7-D"</span>,
      <span class="s2">"town"</span>: <span class="s2">"Madrid"</span>,
      <span class="s2">"zip_code"</span>: <span class="s2">"28046"</span>,
      <span class="s2">"country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"total_paid_incomes"</span>: <span class="s2">"13284.56"</span>,
      <span class="s2">"total_unpaid_incomes"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_incomes"</span>: <span class="s2">"13284.56"</span>,
      <span class="s2">"total_paid_expenses"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_unpaid_expenses"</span>: 0.0,
      <span class="s2">"total_expenses"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"client_number"</span>: <span class="s2">"6"</span>,
      <span class="s2">"supplier_number"</span>: null,
      <span class="s2">"is_client"</span>: <span class="nb">true</span>,
      <span class="s2">"is_supplier"</span>: <span class="nb">false</span>,
      <span class="s2">"is_employee"</span>: <span class="nb">false</span>,
      <span class="s2">"is_supplier_of_direct_goods"</span>: <span class="nb">false</span>,
      <span class="s2">"bank_account_number"</span>: <span class="s2">"ES92 3821 0601 2314 3339 5656"</span>,
      <span class="s2">"bank_account_swift_bic"</span>: <span class="s2">""</span>,
      <span class="s2">"deletable"</span>: <span class="nb">false</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Example response (status 422)</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"errors"</span>: <span class="o">[</span>
    <span class="o">{</span>
      <span class="s2">"detail"</span>: <span class="s2">"Can not be blank."</span>,
      <span class="s2">"source"</span>: <span class="o">{</span>
        <span class="s2">"pointer"</span>: <span class="s2">"/data/attributes/name"</span>
      <span class="o">}</span>
    <span class="o">}</span>, <span class="o">{</span>
      <span class="s2">"detail"</span>: <span class="s2">"This Iban is not valid, please contact your bank and provide a new one."</span>,
      <span class="s2">"source"</span>: <span class="o">{</span>
        <span class="s2">"pointer"</span>: <span class="s2">"/data/attributes/bank_account_number"</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">POST /contacts</code></p>

<h2 id="updating-a-contact">Updating a contact</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/contacts/746868"</span> <span class="se">\</span>
  -X PATCH
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "contacts",
          "attributes": {
            "name": "Another name",
            "email": "another@name.com",
            "bank_account_number": "ES92 3821 0601 2314 3339 5656",
          }
        }
      }'</span>
</code></pre>

<blockquote>
<p>Example response (status: 200)</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"45923"</span>,
    <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Another name"</span>,
      <span class="s2">"tax_id"</span>: <span class="s2">"ESB85033470"</span>,
      <span class="s2">"phone"</span>: <span class="s2">"999999999"</span>,
      <span class="s2">"email"</span>: <span class="s2">"another@name.com"</span>,
      <span class="s2">"address"</span>: <span class="s2">"Paseo de la Castellana 8, 7-D"</span>,
      <span class="s2">"town"</span>: <span class="s2">"Madrid"</span>,
      <span class="s2">"zip_code"</span>: <span class="s2">"28046"</span>,
      <span class="s2">"country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"total_paid_incomes"</span>: <span class="s2">"13284.56"</span>,
      <span class="s2">"total_unpaid_incomes"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_incomes"</span>: <span class="s2">"13284.56"</span>,
      <span class="s2">"total_paid_expenses"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"total_unpaid_expenses"</span>: 0.0,
      <span class="s2">"total_expenses"</span>: <span class="s2">"0.0"</span>,
      <span class="s2">"client_number"</span>: <span class="s2">"6"</span>,
      <span class="s2">"supplier_number"</span>: null,
      <span class="s2">"is_client"</span>: <span class="nb">true</span>,
      <span class="s2">"is_supplier"</span>: <span class="nb">false</span>,
      <span class="s2">"is_employee"</span>: <span class="nb">false</span>,
      <span class="s2">"is_supplier_of_direct_goods"</span>: <span class="nb">false</span>,
      <span class="s2">"bank_account_number"</span>: <span class="s2">"ES92 3821 0601 2314 3339 5656"</span>,
      <span class="s2">"bank_account_swift_bic"</span>: <span class="s2">""</span>,
      <span class="s2">"deletable"</span>: <span class="nb">false</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">(PATCH|PUT) /contacts/:contact_id</code></p>

<h2 id="deleting-a-contact">Deleting a contact</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/contacs/45923"</span> <span class="se">\</span>
  -X DELETE
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<p><code class="prettyprint">DELETE /contacts/:contact_id</code></p>

<p>The response status will be <code class="prettyprint">204 - No Content</code> if the operation was
successfull or <code class="prettyprint">403 - Forbidden</code> if the contact could not be deleted (or authorization fails). A
contact can not be deleted if there are invoices or paysheets associated
with it.</p>

          <h1 id="invoices-tickets-and-paysheets"><a name="invoices-tickets-and-paysheets-section"></a> Invoices, tickets and paysheets</h1>

<p>Only one available action. Get a list with different type of resources</p>

<h2 id="listing-invoices-tickets-and-paysheets-alltoghether">Listing invoices, tickets and paysheets alltoghether</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/book_entries"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"2988939"</span>,
    <span class="s2">"type"</span>: <span class="s2">"invoices"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"2016-2"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-02-29"</span>,
      <span class="s2">"due_date"</span>: null,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-03-02"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"bank_transfer"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"validation_status"</span>: <span class="s2">"pending"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"2472.98"</span>,
      <span class="s2">"total_amount_without_taxes"</span>: <span class="s2">"2333.0"</span>,
      <span class="s2">"vat_amount"</span>: <span class="s2">"489.93"</span>,
      <span class="s2">"retention_amount"</span>: <span class="s2">"349.95"</span>
      <span class="s2">"issuing_name"</span>: <span class="s2">"Paolo Conte"</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"B66086042"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"133"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6326"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>:[]
      <span class="o">}</span>,
      <span class="s2">"contact"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
          <span class="s2">"id"</span>: <span class="s2">"621291"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"3399147"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2937714"</span>,
    <span class="s2">"type"</span>: <span class="s2">"invoices"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"2016-1"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-01-31"</span>,
      <span class="s2">"due_date"</span>: null,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-02-03"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"bank_transfer"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"2472.98"</span>,
      <span class="s2">"total_amount_without_taxes"</span>: <span class="s2">"2333.0"</span>,
      <span class="s2">"vat_amount"</span>: <span class="s2">"489.93"</span>,
      <span class="s2">"retention_amount"</span>: <span class="s2">"349.95"</span>
      <span class="s2">"issuing_name"</span>: <span class="s2">"Paolo Conte"</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"B66086042"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"133"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6326"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="s2">"contact"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
          <span class="s2">"id"</span>: <span class="s2">"621291"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"3319559"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2698918"</span>,
    <span class="s2">"type"</span>: <span class="s2">"tickets"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"expenses"</span>,
      <span class="s2">"number"</span>: <span class="s2">"8"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2015-07-18"</span>,
      <span class="s2">"due_date"</span>: null,
      <span class="s2">"paid_at"</span>: <span class="s2">"2015-10-04"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">""</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"validation_status"</span>: <span class="s2">"verified"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"5.2"</span>,
      <span class="s2">"issuing_name"</span>: <span class="s2">"Bar Paco"</span>,
      <span class="s2">"issuing_tax_id"</span>: null,
      <span class="s2">"issuing_address"</span>: null,
      <span class="s2">"issuing_phone"</span>: null,
      <span class="s2">"issuing_town"</span>: null,
      <span class="s2">"issuing_zip_code"</span>: null,
      <span class="s2">"issuing_country_code"</span>: null,
      <span class="s2">"recipient_name"</span>: <span class="s2">"Paolo Conte"</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"53"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"2957853"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>

  ...

  <span class="o">}</span>,
  <span class="s2">"meta"</span>: <span class="o">{</span>
    pagination_info: <span class="o">{</span>
      <span class="s2">"total_pages"</span>: 2
      <span class="s2">"current_page"</span>: 1
      <span class="s2">"total_results"</span>: 23
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /book_entries</code></p>

<h3 id="available-filters"><a name="book-entries-available-filters"></a> Available filters</h3>

<table><thead>
<tr>
<th>Filter name</th>
<th>Description</th>
<th>Valid values</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>Filters resources by type</td>
<td><code class="prettyprint">invoices</code>, <code class="prettyprint">tickets</code> or <code class="prettyprint">paysheets</code></td>
<td><code class="prettyprint">/book_entries?filter[type]=invoices</code></td>
</tr>
<tr>
<td>kind</td>
<td>Filter resources by kind</td>
<td><code class="prettyprint">expenses</code> or <code class="prettyprint">income</code></td>
<td><code class="prettyprint">/book_entries?filter[kind]=expenses</code></td>
</tr>
<tr>
<td>q</td>
<td>Search</td>
<td>Any</td>
<td><code class="prettyprint">/book_entries?filter[q]=android development</code></td>
</tr>
<tr>
<td>period</td>
<td>Filter resources issued in the specified period</td>
<td>year-[month number,Q1,Q2,Q3,Q4]</td>
<td><code class="prettyprint">/book_entries?filter[period]=2015-Q1</code> =&gt;  First quarter of 2015 <br> <code class="prettyprint">/book_entries?filter[period]=2016-2</code> =&gt; February 2016 <br> <code class="prettyprint">/book_entries?filter[period]=2015</code> =&gt; 2015</td>
</tr>
<tr>
<td>payment_status</td>
<td>Filter resources by payment status</td>
<td><code class="prettyprint">paid</code>, <code class="prettyprint">unpaid</code>, <code class="prettyprint">due</code> or <code class="prettyprint">pending</code></td>
<td><code class="prettyprint">/book_entries?filter[payment_status]=due</code></td>
</tr>
<tr>
<td>contact_id</td>
<td>Filter by contact</td>
<td>The contact ID</td>
<td><code class="prettyprint">/book_entries?filter[contact_id]=1234</code></td>
</tr>
</tbody></table>

<h3 id="sorting"><a name="book-entries-sorting"></a> Sorting</h3>

<table><thead>
<tr>
<th>Criteria name</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>number</td>
<td>Sorts resources by number</td>
<td><code class="prettyprint">/book_entries?sort=-number</code></td>
</tr>
<tr>
<td>issue_date</td>
<td>Sort resources by issue date</td>
<td><code class="prettyprint">/book_entries?sort=-issue_date</code></td>
</tr>
<tr>
<td>counterpart_name</td>
<td>Sorts resources by the counterpart name (issuing_name or recipient_name depending on the kind)</td>
<td><code class="prettyprint">/book_entries?sort=counterpart_name</code></td>
</tr>
<tr>
<td>total_amount</td>
<td>Sort resources by the total amount field</td>
<td><code class="prettyprint">/book_entries?sort=-total_amount</code></td>
</tr>
<tr>
<td>total_amount_without_taxes</td>
<td>Sort resources by the total amount before apply any tax</td>
<td><code class="prettyprint">/book_entries?sort=total_amount_without_taxes</code></td>
</tr>
</tbody></table>

          <h1 id="invoices"><a name="invoices-section"></a> Invoices</h1>

<p>Endpoints to manage invoices.</p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attr. name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>REQUIRED <br> Accepted values: <code class="prettyprint">income</code> or <code class="prettyprint">expenses</code></td>
</tr>
<tr>
<td>number</td>
<td>For income invoices we recommend leave it blank, and Quipu will assign it.<br>For income invoices must be unique within a fiscal year.<br>For expense invoices must be unique within a fiscal year for the invoice supplier.</td>
</tr>
<tr>
<td>issue_date</td>
<td>REQUIRED <br> Format: <code class="prettyprint">YYYY-mm-dd</code></td>
</tr>
<tr>
<td>due_date</td>
<td>Format: <code class="prettyprint">YYYY-mm-dd</code></td>
</tr>
<tr>
<td>paid_at</td>
<td>Format: <code class="prettyprint">YYYY-mm-dd</code></td>
</tr>
<tr>
<td>payment_method</td>
<td>Accepted valued: <code class="prettyprint">cash</code>, <code class="prettyprint">bank_transfer</code>, <code class="prettyprint">bank_card</code>, <code class="prettyprint">direct_debit</code>, <code class="prettyprint">paypal</code>, <code class="prettyprint">check</code>, <code class="prettyprint">factoring</code></td>
</tr>
<tr>
<td>payment_status</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>total_amount</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>total_amount</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>total_amount_without_taxes</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>vat_amount</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>retention_amount</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>issuing_name</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_tax_id</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_address</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_phone</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_town</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_zip_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_country_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_name</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_tax_id</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_address</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_phone</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_town</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_zip_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_country_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>last_sent_at</td>
<td>Format: a unix timestamp</td>
</tr>
<tr>
<td>tags</td>
<td>Format: a list of strings separated by comma</td>
</tr>
<tr>
<td>notes</td>
<td>Format: a string</td>
</tr>
<tr>
<td>download_pdf_url</td>
<td>Url to download the pdf document for the invoice. Present only in income invoices. Needs the same authorization header.</td>
</tr>
<tr>
<td>ephemeral_open_download_pdf_url</td>
<td>Url to download the pdf document for the invoice. Present only in income invoices. Does not need any authorization header, but can only be used for an hour after getting it.</td>
</tr>
</tbody></table>

<p>* This fields will be populated and updated each time an invoice is saved from the information of the Quipu account owner and the contact associated with the book entry.</p>

<h2 id="relationships">Relationships</h2>

<table><thead>
<tr>
<th>Relationship name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>contact</td>
<td>REQUIRED (except for amending invoices)</td>
</tr>
<tr>
<td>accounting_category</td>
<td></td>
</tr>
<tr>
<td>accounting_subcategory</td>
<td></td>
</tr>
<tr>
<td>numeration</td>
<td>Applicable only to invoices with <code class="prettyprint">kind = income</code></td>
</tr>
<tr>
<td>analytic_categories</td>
<td>Can not be a root analytic category</td>
</tr>
<tr>
<td>items</td>
<td>Can be sideloaded in GET requests. <br> Must be included in the payload in POST/PATCH/PUT requests</td>
</tr>
<tr>
<td>amended_invoice</td>
<td>The invoice amended by the current one.</td>
</tr>
<tr>
<td>amending_invoices</td>
<td>Invoices that amend the current one (Read Only)</td>
</tr>
</tbody></table>

<h2 id="listing-invoices">Listing invoices</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/invoices"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"2988939"</span>,
    <span class="s2">"type"</span>: <span class="s2">"invoices"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"2016-2"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-02-29"</span>,
      <span class="s2">"due_date"</span>: null,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-03-02"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"bank_transfer"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"2472.98"</span>,
      <span class="s2">"total_amount_without_taxes"</span>: <span class="s2">"2333.0"</span>,
      <span class="s2">"vat_amount"</span>: <span class="s2">"489.93"</span>,
      <span class="s2">"retention_amount"</span>: <span class="s2">"349.95"</span>
      <span class="s2">"issuing_name"</span>: <span class="s2">"Paolo Conte"</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"B66086042"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>,
      <span class="s2">"last_sent_at"</span>: 1457364458
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"133"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6326"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>:[]
      <span class="o">}</span>,
      <span class="s2">"contact"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
          <span class="s2">"id"</span>: <span class="s2">"621291"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"3399147"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2937714"</span>,
    <span class="s2">"type"</span>: <span class="s2">"invoices"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"2016-1"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-01-31"</span>,
      <span class="s2">"due_date"</span>: null,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-02-03"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"bank_transfer"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"2472.98"</span>,
      <span class="s2">"total_amount_without_taxes"</span>: <span class="s2">"2333.0"</span>,
      <span class="s2">"vat_amount"</span>: <span class="s2">"489.93"</span>,
      <span class="s2">"retention_amount"</span>: <span class="s2">"349.95"</span>
      <span class="s2">"issuing_name"</span>: <span class="s2">"Paolo Conte"</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"B66086042"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">"vip client, important"</span>,
      <span class="s2">"last_sent_at"</span>: 1457364458
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"133"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6326"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="s2">"contact"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
          <span class="s2">"id"</span>: <span class="s2">"621291"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"3319559"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>

  ...

  <span class="o">}</span>,
  <span class="s2">"meta"</span>: <span class="o">{</span>
    pagination_info: <span class="o">{</span>
      <span class="s2">"total_pages"</span>: 2
      <span class="s2">"current_page"</span>: 1
      <span class="s2">"total_results"</span>: 23
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /invoices</code></p>

<p>Paginated. 20 results per page</p>

<h3 id="available-filters">Available filters</h3>

<p>See <a href="#book-entries-available-filters">Invoices, tickets and paysheets =&gt; Available filters</a></p>

<h3 id="sorting">Sorting</h3>

<p>See <a href="#book-entries-sorting">Invoices, tickets and paysheets =&gt; Sorting</a></p>

<h3 id="side-loading-items">Side loading items</h3>

<p>If you want to retrieve the complete information about the items associated with the invoices, you can pass <code class="prettyprint">?include=items</code> in the url</p>

<p>Example:</p>

<p><code class="prettyprint">GET /invoices?include=items</code></p>

<h2 id="getting-an-invoice">Getting an invoice</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/invoices/2988939"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2988939"</span>,
    <span class="s2">"type"</span>: <span class="s2">"invoices"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"2016-2"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-02-29"</span>,
      <span class="s2">"due_date"</span>: null,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-03-02"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"bank_transfer"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"2472.98"</span>,
      <span class="s2">"total_amount_without_taxes"</span>: <span class="s2">"2333.0"</span>,
      <span class="s2">"vat_amount"</span>: <span class="s2">"489.93"</span>,
      <span class="s2">"retention_amount"</span>: <span class="s2">"349.95"</span>
      <span class="s2">"issuing_name"</span>: <span class="s2">"Paolo Conte"</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"B66086042"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>,
      <span class="s2">"last_sent_at"</span>: 1457364458
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"133"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6326"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>:[]
      <span class="o">}</span>,
      <span class="s2">"contact"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
          <span class="s2">"id"</span>: <span class="s2">"621291"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"3399147"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Example response with items included</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2988939"</span>,
    <span class="s2">"type"</span>: <span class="s2">"invoices"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"2016-2"</span>,

      ... <span class="o">(</span>some attrs omitted<span class="o">)</span>

      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>

      .... <span class="o">(</span>some relationships omitted<span class="o">)</span>

      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"id"</span>: <span class="s2">"3298861"</span>,
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>
        <span class="o">}</span>, <span class="o">{</span>
          <span class="s2">"id"</span>: <span class="s2">"3298862"</span>,
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>
        <span class="o">}</span>, <span class="o">{</span>
          <span class="s2">"id"</span>: <span class="s2">"3298863"</span>,
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>,
  <span class="s2">"included"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"3298861"</span>,
    <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"concept"</span>: <span class="s2">"T10 1 zona"</span>
      <span class="s2">"unitary_amount"</span>:<span class="s2">"9.038"</span>
      <span class="s2">"quantity"</span>:<span class="s2">"5.0"</span>
      <span class="s2">"vat_amount"</span>:<span class="s2">"4.519"</span>
      <span class="s2">"retention_amount"</span>:<span class="s2">"0.0"</span>
      <span class="s2">"total_amount"</span>:<span class="s2">"49.709"</span>
      <span class="s2">"vat_percent"</span>:<span class="s2">"10.0"</span>
      <span class="s2">"retention_percent"</span>:<span class="s2">"0.0"</span>,
      <span class="s2">"description"</span>: <span class="s2">"item description"</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>:<span class="s2">"3298862"</span>
    <span class="s2">"type"</span>:<span class="s2">"book_entry_items"</span>
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"concept"</span>:<span class="s2">"T10 2 zones"</span>
      <span class="s2">"unitary_amount"</span>:<span class="s2">"17.82"</span>
      <span class="s2">"quantity"</span>:<span class="s2">"19.0"</span>
      <span class="s2">"vat_amount"</span>:<span class="s2">"33.858"</span>
      <span class="s2">"retention_amount"</span>:<span class="s2">"0.0"</span>
      <span class="s2">"total_amount"</span>:<span class="s2">"372.438"</span>
      <span class="s2">"vat_percent"</span>:<span class="s2">"10.0"</span>
      <span class="s2">"retention_percent"</span>:<span class="s2">"0.0"</span>,
      <span class="s2">"description"</span>: <span class="s2">"item description"</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>:<span class="s2">"3298863"</span>
    <span class="s2">"type"</span>:<span class="s2">"book_entry_items"</span>
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"concept"</span>:<span class="s2">"T50/30 1 zona"</span>
      <span class="s2">"unitary_amount"</span>:<span class="s2">"38.64"</span>
      <span class="s2">"quantity"</span>:<span class="s2">"1.0"</span>
      <span class="s2">"vat_amount"</span>:<span class="s2">"3.864"</span>
      <span class="s2">"retention_amount"</span>:<span class="s2">"0.0"</span>
      <span class="s2">"total_amount"</span>:<span class="s2">"42.504"</span>
      <span class="s2">"vat_percent"</span>:<span class="s2">"10.0"</span>
      <span class="s2">"retention_percent"</span>:<span class="s2">"0.0"</span>,
      <span class="s2">"description"</span>: <span class="s2">"item description"</span>
    <span class="o">}</span>
  <span class="o">}]</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /invoices/:invoice_id</code></p>

<h2 id="creating-an-invoice">Creating an invoice</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/invoices"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "invoices",
          "attributes": {
            "kind": "income",
            "number": null,
            "issue_date": "2016-03-12",
            "due_date": "2016-05-12",
            "paid_at": null,
            "payment_method": "bank_transfer",
            "tags": "songo, timba"
          },
          "relationships": {
            "contact": {
              "data": {
                "id": 6347,
                "type": "contacts"
              }
            },
            "accounting_category": {
              "data": {
                "id": 123,
                "type": "accounting_categories"
              }
            },

            ...

            "items": {
              "data": [{
                "type": "book_entry_items",
                "attributes": {
                  "concept": "Tornillos",
                  "unitary_amount": "0.50",
                  "quantity": 30,
                  "vat_percent": 21,
                  "retention_percent": 0
                }
              }, {
                "type": "book_entry_items",
                "attributes": {
                  "concept": "Tuercas",
                  "unitary_amount": "0.35",
                  "quantity": 30,
                  "vat_percent": 21,
                  "retention_percent": 0
                }
              }]
            }
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">POST /invoices</code></p>

<h3 id="about-items">About items</h3>

<p>The way we send info about the items associated to a book entry is not compliant
with the JSON API format. We do it this way because this resource (book entry items)
are an essential part of a book entry, and to save some api calls. In brief,
when sending data about the items we add the info in <code class="prettyprint">relationships =&gt; items =&gt; data =&gt; attributes</code>,
but in the responses we will find the details about items in the <code class="prettyprint">includes</code> object.</p>

<h2 id="updating-an-invoice">Updating an invoice</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/invoices/2988939"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 818abe1ea4a1813999a47105892d50f3781320c588fb8cd2927885963e621228"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "invoices",
          "id": 2988939,
          "attributes": {
            "issue_date": "2016-02-21"
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">(PUT|PATCH) /invoices/:invoice_id</code></p>

<h2 id="deleting-an-invoice">Deleting an invoice</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/invoices/2988939"</span> <span class="se">\</span>
  -X DELETE
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<p><code class="prettyprint">DELETE /invoices/:invoice_id</code></p>

<h2 id="refunds-and-amending-invoices">Refunds and amending invoices</h2>

<p>An invoice can be totally or partially amended. The minimal amount of data needed to create an amending invoice is the relationship <code class="prettyprint">amended_invoice</code>. With this data a complete refund of the original invoice will be created.</p>

<p>You can also partially amend an invoice setting the items of the amending invoice manually.</p>

<blockquote>
<p>Example request for a complete refund</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/invoices"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "invoices",
          "relationships": {
            "amended_invoice": {
              "data": {
                "id": 879495,
                "type": "invoices"
              }
            }
          }
        }
      }'</span>
</code></pre>

<blockquote>
<p>Example of a partial refund</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/invoices"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "invoices",
          "relationships": {
            "amended_invoice": {
              "data": {
                "id": 879495,
                "type": "invoices"
              }
            },
            "items": {
              "data": [{
                "type": "book_entry_items",
                "attributes": {
                  "concept": "Partial refund for service delay",
                  "quantity": 1,
                  "unitary_amount": "-5.00",
                  "vat_percent": 21
                }
              }]
            }
          }
        }
      }'</span>
</code></pre>

          <h1 id="tickets"><a name="tickets-section"></a> Tickets</h1>

<p>Endpoints to manage tickets (receipts).</p>

<p>The main difference between invoices and tickets is that the latest don&rsquo;t have an associated contact. You provide only the counterpart name: the <code class="prettyprint">issuing_name</code> for expense tickets or the <code class="prettyprint">recipient_name</code> for income tickets</p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attr. name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>REQUIRED <br> Accepted values: <code class="prettyprint">income</code> or <code class="prettyprint">expenses</code></td>
</tr>
<tr>
<td>number</td>
<td>For income tickets we recommend leave it blank, and Quipu will assign it.<br>For income tickets must be unique within a fiscal year.</td>
</tr>
<tr>
<td>issue_date</td>
<td>REQUIRED <br> Format: <code class="prettyprint">YYYY-mm-dd</code></td>
</tr>
<tr>
<td>paid_at</td>
<td>Format: <code class="prettyprint">YYYY-mm-dd</code></td>
</tr>
<tr>
<td>payment_method</td>
<td>Accepted valued: <code class="prettyprint">cash</code>, <code class="prettyprint">bank_transfer</code>, <code class="prettyprint">bank_card</code>, <code class="prettyprint">direct_debit</code>, <code class="prettyprint">paypal</code>, <code class="prettyprint">check</code>, <code class="prettyprint">factoring</code></td>
</tr>
<tr>
<td>payment_status</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>total_amount</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>total_amount</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>total_amount_without_taxes</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>vat_amount</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>retention_amount</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>issuing_name</td>
<td>REQUIRED for expense tickets.<br>READ ONLY for income tickets. *</td>
</tr>
<tr>
<td>issuing_tax_id</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_address</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_phone</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_town</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_zip_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_country_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_name</td>
<td>REQUIRED for income tickets.<br>READ ONLY for expense tickets. *</td>
</tr>
<tr>
<td>recipient_tax_id</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_address</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_phone</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_town</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_zip_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_country_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>tags</td>
<td>Format: a list of strings separated by comma</td>
</tr>
<tr>
<td>notes</td>
<td>Format: a string</td>
</tr>
<tr>
<td>download_pdf_url</td>
<td>Url to download the pdf document for the ticket. Present only in income tickets. Needs the same authorization header.</td>
</tr>
<tr>
<td>download_pdf_url</td>
<td>Url to download the pdf document for the invoice. Present only in income tickets. Needs the same authorization header.</td>
</tr>
</tbody></table>

<p>* This fields will be populated and updated each time an invoice is saved from the information of the Quipu account owner and the contact associatied with the book entry.</p>

<h2 id="relationships">Relationships</h2>

<table><thead>
<tr>
<th>Relationship name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>accounting_category</td>
<td></td>
</tr>
<tr>
<td>accounting_subcategory</td>
<td></td>
</tr>
<tr>
<td>numeration</td>
<td>Applicable only to tickets with <code class="prettyprint">kind = income</code></td>
</tr>
<tr>
<td>analytic_categories</td>
<td>Can not be a root analytic category</td>
</tr>
<tr>
<td>items</td>
<td>Can be sideloaded in GET requests. <br> Must be included in the payload in POST/PATCH/PUT requests</td>
</tr>
<tr>
<td>amended_ticket</td>
<td>The ticket amended by the current one.</td>
</tr>
<tr>
<td>amending_tickets</td>
<td>Ticket that amends the current one (Read Only)</td>
</tr>
</tbody></table>

<h2 id="listing-tickets">Listing tickets</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/tickets"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"2988939"</span>,
    <span class="s2">"type"</span>: <span class="s2">"tickets"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"t16-53"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-02-29"</span>,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-03-02"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"cash"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"5.40"</span>,
      <span class="s2">"total_amount_without_taxes"</span>: <span class="s2">"4.46"</span>,
      <span class="s2">"vat_amount"</span>: <span class="s2">"0.94"</span>,
      <span class="s2">"retention_amount"</span>: <span class="s2">"0.0"</span>
      <span class="s2">"issuing_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"Manolo"</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">""</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"133"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6332"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>:[]
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"3399147"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2937714"</span>,
    <span class="s2">"type"</span>: <span class="s2">"tickets"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"t16-53"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-01-31"</span>,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-02-03"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"cash"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"5.40"</span>,
      <span class="s2">"total_amount_without_taxes"</span>: <span class="s2">"4.46"</span>,
      <span class="s2">"vat_amount"</span>: <span class="s2">"0.94"</span>,
      <span class="s2">"retention_amount"</span>: <span class="s2">"0.0"</span>
      <span class="s2">"issuing_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"Manolo"</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">""</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"133"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6326"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"3319559"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>

  ...

  <span class="o">}</span>,
  <span class="s2">"meta"</span>: <span class="o">{</span>
    pagination_info: <span class="o">{</span>
      <span class="s2">"total_pages"</span>: 2
      <span class="s2">"current_page"</span>: 1
      <span class="s2">"total_results"</span>: 23
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /tickets</code></p>

<h3 id="available-filters">Available filters</h3>

<p>See <a href="#book-entries-available-filters">Invoices, tickets and paysheets =&gt; Available filters</a></p>

<h3 id="sorting">Sorting</h3>

<p>See <a href="#book-entries-sorting">Invoices, tickets and paysheets =&gt; Sorting</a></p>

<h3 id="side-loading-items">Side loading items</h3>

<p>If you want to retrieve the complete information about the items associated with the tickets, you can pass <code class="prettyprint">?include=items</code> in the url</p>

<p>Example:</p>

<p><code class="prettyprint">GET /tickets?include=items</code></p>

<h2 id="getting-a-ticket">Getting a ticket</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/tickets/2989809"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2989809"</span>,
    <span class="s2">"type"</span>: <span class="s2">"tickets"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>,
      <span class="s2">"number"</span>: <span class="s2">"t16-53"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-02-29"</span>,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-03-02"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"cash"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"total_amount"</span>: <span class="s2">"5.40"</span>,
      <span class="s2">"total_amount_without_taxes"</span>: <span class="s2">"4.46"</span>,
      <span class="s2">"vat_amount"</span>: <span class="s2">"0.94"</span>,
      <span class="s2">"retention_amount"</span>: <span class="s2">"0.0"</span>
      <span class="s2">"issuing_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"43467890F"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"Manolo"</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">""</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">""</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"133"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6332"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>:[]
      <span class="o">}</span>,
      <span class="s2">"items"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[{</span>
          <span class="s2">"type"</span>: <span class="s2">"book_entry_items"</span>,
          <span class="s2">"id"</span>: <span class="s2">"3399147"</span>
        <span class="o">}]</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /tickets/:ticket_id</code> |
<code class="prettyprint">GET /tickets/:ticket_id?include=items</code></p>

<h2 id="creating-a-ticket">Creating a ticket</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/tickets"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "tickets",
          "attributes": {
            "kind": "income",
            "number": null,
            "recipient_name": "unknown",
            "issue_date": "2016-03-08",
            "paid_at": "2016-03-08",
            "payment_method": "cash",
            "tags": "songo, timba"
          },
          "relationships": {
            "accounting_category": {
              "data": {
                "id": 123,
                "type": "accounting_categories"
              }
            },

            ...

            "items": {
              "data": [{
                "type": "book_entry_items",
                "attributes": {
                  "concept": "Tornillos"
                  "unitary_amount": "0.50",
                  "quantity": 30,
                  "vat_percent": 21,
                  "retention_percent": 0
                }
              }, {
                "type": "book_entry_items",
                "attributes": {
                  "concept": "Tuercas"
                  "unitary_amount": "0.35",
                  "quantity": 30,
                  "vat_percent": 21,
                  "retention_percent": 0
                }
              }]
            }
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">POST /tickets</code></p>

<h2 id="updating-a-ticket">Updating a ticket</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># This request will update the attributes of the item with id 23424141,</span>
<span class="c"># create a new item with concept "Tuercas",</span>
<span class="c"># and destroy other items associated to the ticket if any.</span>

curl <span class="s2">"https://getquipu.com/tickets/2682381"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 818abe1ea4a1813999a47105892d50f3781320c588fb8cd2927885963e621228"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "invoices",
          "id": 2682381,
          "attributes": {
            "paid_at": "21-2-2016"
          },
          "relationships": {
            "items": {
              "data": [{
                "id": 23424141,
                "type": "book_entry_items",
                "attributes": {
                  "concept": "Tornillos"
                  "unitary_amount": "0.50",
                  "quantity": 30,
                  "vat_percent": 21,
                  "retention_percent": 0
                }
              }, {
                "type": "book_entry_items",
                "attributes": {
                  "concept": "Tuercas"
                  "unitary_amount": "0.35",
                  "quantity": 30,
                  "vat_percent": 21,
                  "retention_percent": 0
                }
              }]
            }
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">(PUT|PATCH) /tickets/:ticket_id</code></p>

<h2 id="deleting-a-ticket">Deleting a ticket</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/tickets/2988939"</span> <span class="se">\</span>
  -X DELETE
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<p><code class="prettyprint">DELETE /tickets/:ticket_id</code></p>

<h2 id="refunds-and-amending-tickets">Refunds and amending tickets</h2>

<p>A ticket can be totally or partially amended. The minimal amount of data needed to create an amending ticket is the relationship <code class="prettyprint">amended_ticket</code>. With this data a complete refund of the original ticket will be created.</p>

<p>You can also partially amend a ticket setting the items of the amending ticket manually.</p>

<blockquote>
<p>Example request for a complete refund</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/tickets"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "tickets",
          "relationships": {
            "amended_ticket": {
              "data": {
                "id": 879495,
                "type": "tickets"
              }
            }
          }
        }
      }'</span>
</code></pre>

<blockquote>
<p>Example of a partial refund</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/tickets"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "tickets",
          "relationships": {
            "amended_ticket": {
              "data": {
                "id": 879495,
                "type": "tickets"
              }
            },
            "items": {
              "data": [{
                "type": "book_entry_items",
                "attributes": {
                  "concept": "Partial refund for service delay",
                  "quantity": 1,
                  "unitary_amount": "-5.00",
                  "vat_percent": 21
                }
              }]
            }
          }
        }
      }'</span>
</code></pre>

          <h1 id="items">Items</h1>

<p>There aren&rsquo;t specific endpoints to manage items. Items are always associated to an invoice or ticket and should be manipulated through it.</p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attr. name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Read only</td>
</tr>
<tr>
<td>concept</td>
<td></td>
</tr>
<tr>
<td>unitary_amount</td>
<td></td>
</tr>
<tr>
<td>quantity</td>
<td></td>
</tr>
<tr>
<td>kind</td>
<td>Must be <code class="prettyprint">current</code> or <code class="prettyprint">assets</code> (*) for items associated to expenses.  Must be <code class="prettyprint">current</code> or <code class="prettyprint">reimbursement</code> (**) for items associated to income.  Default is <code class="prettyprint">current</code></td>
</tr>
<tr>
<td>vat_percent</td>
<td>Percentage. Between 0 and 100</td>
</tr>
<tr>
<td>retention_percent</td>
<td>Percentage. Between 0 and 100</td>
</tr>
<tr>
<td>discount_percent</td>
<td>Percentage. Between 0 and 100</td>
</tr>
<tr>
<td>deductible_vat_percent</td>
<td>Percentage. Between 0 and 100</td>
</tr>
<tr>
<td>deductible_expense_percent</td>
<td>Percentage. Between 0 and 100</td>
</tr>
<tr>
<td>description</td>
<td>String. Item description</td>
</tr>
<tr>
<td>vat_amount</td>
<td>Read only</td>
</tr>
<tr>
<td>retention_amount</td>
<td>Read only</td>
</tr>
<tr>
<td>discount_amount</td>
<td>Read only</td>
</tr>
<tr>
<td>decuctible_vat_amount</td>
<td>Read only</td>
</tr>
<tr>
<td>total_amount</td>
<td>Read only</td>
</tr>
</tbody></table>

<p>* Items with kind <code class="prettyprint">assets</code>:</p>

<p>** Items with kind <code class="prettyprint">reimbursement</code>:</p>

          <h1 id="paysheets"><a name="paysheets-section"></a> Paysheets</h1>

<p>Endpoints to manage paysheets</p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attr. name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>READ ONLY. Always <code class="prettyprint">expenses</code></td>
</tr>
<tr>
<td>number</td>
<td>We recommend leave it blank, and Quipu will assign it.<br>Must be unique within a fiscal year.</td>
</tr>
<tr>
<td>issue_date</td>
<td>REQUIRED <br> Format: <code class="prettyprint">YYYY-mm-dd</code></td>
</tr>
<tr>
<td>paid_at</td>
<td>Format: <code class="prettyprint">YYYY-mm-dd</code></td>
</tr>
<tr>
<td>payment_method</td>
<td>Accepted valued: <code class="prettyprint">cash</code>, <code class="prettyprint">bank_transfer</code>, <code class="prettyprint">bank_card</code>, <code class="prettyprint">direct_debit</code>, <code class="prettyprint">paypal</code>, <code class="prettyprint">check</code>, <code class="prettyprint">factoring</code></td>
</tr>
<tr>
<td>payment_status</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>net_pay</td>
<td></td>
</tr>
<tr>
<td>gross_pay</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>employee_ss_amount</td>
<td></td>
</tr>
<tr>
<td>employee_retention</td>
<td></td>
</tr>
<tr>
<td>company_ss_amount</td>
<td></td>
</tr>
<tr>
<td>issuing_name</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_tax_id</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_address</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_phone</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_town</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_zip_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>issuing_country_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_name</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_tax_id</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_address</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_phone</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_town</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_zip_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>recipient_country_code</td>
<td>READ ONLY, *</td>
</tr>
<tr>
<td>tags</td>
<td>Format: a list of strings separated by comma</td>
</tr>
</tbody></table>

<p>* This fields will be populated and updated each time a paysheet is saved from the information of the Quipu account owner and the contact associatied with the paysheet.</p>

<h2 id="relationships">Relationships</h2>

<table><thead>
<tr>
<th>Relationship name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>contact</td>
<td>REQUIRED</td>
</tr>
<tr>
<td>accounting_category</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>accounting_subcategory</td>
<td></td>
</tr>
<tr>
<td>analytic_categories</td>
<td>Can not be a root analytic category</td>
</tr>
</tbody></table>

<h2 id="listing-paysheets">Listing paysheets</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/paysheets"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"3007641"</span>,
    <span class="s2">"type"</span>: <span class="s2">"paysheets"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"expenses"</span>,
      <span class="s2">"number"</span>: <span class="s2">"N-18"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-01-30"</span>,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-02-05"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"bank_transfer"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"net_pay"</span>: <span class="s2">"1185.76"</span>,
      <span class="s2">"gross_pay"</span>: <span class="s2">"1387.5"</span>,
      <span class="s2">"employee_ss_amount"</span>: <span class="s2">"88.8"</span>,
      <span class="s2">"employee_retention"</span>: <span class="s2">"112.94"</span>,
      <span class="s2">"company_ss_amount"</span>: <span class="s2">"450.25"</span>,
      <span class="s2">"issuing_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"B66086042"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"Kunta Kinte"</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"43429713D"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">"C/ Gambia, 72, entlo-4a"</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">"999999999"</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">"Hospitalet de Llobregat"</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">"08199"</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"28"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6332"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>:[]
      <span class="o">}</span>,
      <span class="s2">"contact"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
          <span class="s2">"id"</span>: <span class="s2">"621291"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"3007642"</span>,
    <span class="s2">"type"</span>: <span class="s2">"paysheets"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"expenses"</span>,
      <span class="s2">"number"</span>: <span class="s2">"N-19"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-01-30"</span>,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-02-05"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"bank_transfer"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"net_pay"</span>: <span class="s2">"1185.76"</span>,
      <span class="s2">"gross_pay"</span>: <span class="s2">"1387.5"</span>,
      <span class="s2">"employee_ss_amount"</span>: <span class="s2">"88.8"</span>,
      <span class="s2">"employee_retention"</span>: <span class="s2">"112.94"</span>,
      <span class="s2">"company_ss_amount"</span>: <span class="s2">"450.25"</span>,
      <span class="s2">"issuing_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"B66086042"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"Kunta Kinte"</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"43429713D"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">"C/ Gambia, 72, entlo-4a"</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">"999999999"</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">"Hospitalet de Llobregat"</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">"08199"</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"28"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6326"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">[]</span>
      <span class="o">}</span>,
      <span class="s2">"contact"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
          <span class="s2">"id"</span>: <span class="s2">"621291"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>

  ...

  <span class="o">}</span>,
  <span class="s2">"meta"</span>: <span class="o">{</span>
    pagination_info: <span class="o">{</span>
      <span class="s2">"total_pages"</span>: 2
      <span class="s2">"current_page"</span>: 1
      <span class="s2">"total_results"</span>: 23
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /paysheets</code></p>

<h2 id="getting-a-paysheet">Getting a paysheet</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/paysheets/3007642"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"3007641"</span>,
    <span class="s2">"type"</span>: <span class="s2">"paysheets"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"kind"</span>: <span class="s2">"expenses"</span>,
      <span class="s2">"number"</span>: <span class="s2">"N-18"</span>,
      <span class="s2">"issue_date"</span>: <span class="s2">"2016-01-30"</span>,
      <span class="s2">"paid_at"</span>: <span class="s2">"2016-02-05"</span>,
      <span class="s2">"payment_method"</span>: <span class="s2">"bank_transfer"</span>,
      <span class="s2">"payment_status"</span>: <span class="s2">"paid"</span>,
      <span class="s2">"net_pay"</span>: <span class="s2">"1185.76"</span>,
      <span class="s2">"gross_pay"</span>: <span class="s2">"1387.5"</span>,
      <span class="s2">"employee_ss_amount"</span>: <span class="s2">"88.8"</span>,
      <span class="s2">"employee_retention"</span>: <span class="s2">"112.94"</span>,
      <span class="s2">"company_ss_amount"</span>: <span class="s2">"450.25"</span>,
      <span class="s2">"issuing_name"</span>: <span class="s2">"QuipuApp S.L."</span>,
      <span class="s2">"issuing_tax_id"</span>: <span class="s2">"B66086042"</span>,
      <span class="s2">"issuing_address"</span>: <span class="s2">"C/ Viladomat 39"</span>,
      <span class="s2">"issuing_phone"</span>: <span class="s2">"123456789"</span>,
      <span class="s2">"issuing_town"</span>: <span class="s2">"San Cucufate"</span>,
      <span class="s2">"issuing_zip_code"</span>: <span class="s2">"09876"</span>,
      <span class="s2">"issuing_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"recipient_name"</span>: <span class="s2">"Kunta Kinte"</span>,
      <span class="s2">"recipient_tax_id"</span>: <span class="s2">"43429713D"</span>,
      <span class="s2">"recipient_address"</span>: <span class="s2">"C/ Gambia, 72, entlo-4a"</span>,
      <span class="s2">"recipient_phone"</span>: <span class="s2">"999999999"</span>,
      <span class="s2">"recipient_town"</span>: <span class="s2">"Hospitalet de Llobregat"</span>,
      <span class="s2">"recipient_zip_code"</span>: <span class="s2">"08199"</span>,
      <span class="s2">"recipient_country_code"</span>: <span class="s2">"es"</span>,
      <span class="s2">"tags"</span>: <span class="s2">""</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
          <span class="s2">"id"</span>: <span class="s2">"28"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"accounting_subcategory"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: null
      <span class="o">}</span>,
      <span class="s2">"numeration"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
          <span class="s2">"id"</span>: <span class="s2">"6332"</span>
        <span class="o">}</span>
      <span class="o">}</span>,
      <span class="s2">"analytic_categories"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>:[]
      <span class="o">}</span>,
      <span class="s2">"contact"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"type"</span>: <span class="s2">"contacts"</span>,
          <span class="s2">"id"</span>: <span class="s2">"621291"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /paysheets/:paysheet_id</code></p>

<h2 id="creating-a-paysheet">Creating a paysheet</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/paysheets"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "paysheets",
          "attributes": {
            "issue_date": "2016-03-12",
            "net_pay": "1185.76",
            "employee_ss_amount": "88.8",
            "employee_retention": "112.94",
            "company_ss_amount": "450.25",
            "tags": "songo, timba"
          },
          "relationships": {
            "contact": {
              "data" {
                "id": 6347,
                "type": "contacts"
              }
            },
            "analytic_categories": {
              ...
            },
            "accounting_subcategories": {
              ...
            },
            "numeration": {
              ...
            }
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">POST /paysheets</code></p>

<h2 id="updating-a-paysheet">Updating a paysheet</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/paysheets/462380"</span> <span class="se">\</span>
  -X PATCH
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "id": 462380,
          "type": "paysheets",
          "attributes": {
            "net_pay": "1185.76",
            "employee_ss_amount": "88.8",
            "employee_retention": "112.94",
            "company_ss_amount": "450.25",
            "tags": ""
          },
        }
      }'</span>

</code></pre>

<p><code class="prettyprint">(PATCH/PUT) /paysheets/:paysheet_id</code></p>

<h2 id="deleting-a-paysheet">Deleting a paysheet</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/paysheets/2988939"</span> <span class="se">\</span>
  -X DELETE
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<p><code class="prettyprint">DELETE /paysheets/:paysheet_id</code></p>

          <h1 id="numbering-series"><a name="numbering-series-section"></a> Numbering series</h1>

<p>The numbering series are applicable only to income tickets and invoices.</p>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attr. name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>prefix</td>
<td>REQUIRED. Must be unique. The prefix that will be preppended to the invoice, or ticket</td>
</tr>
<tr>
<td>applicable_to</td>
<td>REQUIRED. Accepted values: <code class="prettyprint">&quot;tickets&quot;</code> or <code class="prettyprint">&quot;invoices&quot;</code></td>
</tr>
<tr>
<td>default</td>
<td>Accepted values: <code class="prettyprint">true</code> or <code class="prettyprint">false</code>. Used only in the fronted when creating a new income invoice or ticket.</td>
</tr>
<tr>
<td>amending</td>
<td>Accepted values: <code class="prettyprint">true</code> or <code class="prettyprint">false</code>. Indicates if the series is applicable to amendig tickets or invoices</td>
</tr>
<tr>
<td>deletable</td>
<td>READ ONLY. Indicates if the numeration can be deleted. If there are invoices or tickets using a numeration this numeration can not be deleted</td>
</tr>
</tbody></table>

<h2 id="listing-the-numbering-series">Listing the numbering series</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/numbering_series"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"6326"</span>,
    <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"prefix"</span>: <span class="s2">"2016"</span>,
      <span class="s2">"deletable"</span>: <span class="nb">false</span>,
      <span class="s2">"default"</span>: <span class="nb">true</span>,
      <span class="s2">"amending"</span>: <span class="nb">false</span>,
      <span class="s2">"applicable_to"</span>: <span class="s2">"invoices"</span>
    <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"6332"</span>,
    <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"prefix"</span>: <span class="s2">"AT16"</span>,
      <span class="s2">"deletable"</span>: <span class="nb">false</span>,
      <span class="s2">"default"</span>: <span class="nb">false</span>,
      <span class="s2">"amending"</span>: <span class="nb">true</span>,
      <span class="s2">"applicable_to"</span>: <span class="s2">"tickets"</span>
    <span class="o">}</span>
  <span class="o">}]</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /numbering_series</code></p>

<h3 id="available-filters">Available filters</h3>

<table><thead>
<tr>
<th>Filter name</th>
<th>Description</th>
<th>Valid values</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>prefix</td>
<td>Searh numbering series by prefix. Substring search. Case insensitive.</td>
<td>A string</td>
<td><code class="prettyprint">?filter[prefix]=FC16</code></td>
</tr>
<tr>
<td>applicable_to</td>
<td>Filters by the kind of document the series is applicable to</td>
<td><code class="prettyprint">invoices</code>, <code class="prettyprint">tickets</code>, <code class="prettyprint">budgets</code></td>
<td><code class="prettyprint">?filter[applicable_to]=invoices</code></td>
</tr>
<tr>
<td>amending</td>
<td>Filters the series by whether they are applicable to amending documents</td>
<td><code class="prettyprint">true</code>, <code class="prettyprint">false</code></td>
<td><code class="prettyprint">?filter[amending]=false</code></td>
</tr>
</tbody></table>

<h2 id="getting-a-numbering-serie">Getting a numbering serie</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/numbering_series/6326"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"6326"</span>,
    <span class="s2">"type"</span>: <span class="s2">"numbering_series"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"prefix"</span>: <span class="s2">"2016"</span>,
      <span class="s2">"deletable"</span>: <span class="nb">false</span>,
      <span class="s2">"default"</span>: <span class="nb">true</span>,
      <span class="s2">"amending"</span>: <span class="nb">false</span>,
      <span class="s2">"applicable_to"</span>: <span class="s2">"invoices"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /numbering_series/:numbering_series_id</code></p>

<h2 id="creating-a-numbering-series">Creating a numbering series</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/numbering_series"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "numbering_series",
          "attributes": {
            prefix: "AIT",
            applicable_to: "invoices",
            amending: false,
            default: false
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">POST /numbering_series/:numbering_series_id</code></p>

<h2 id="updating-a-numbering-series">Updating a numbering series</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/numbering_series/3412"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "id": "3412",
          "type": "numbering_series",
          "attributes": {
            default: true
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">(PUT|PATCH) /numbering_series/:numbering_series_id</code></p>

<h2 id="deleting-a-numbering-series">Deleting a numbering series</h2>

<p>The server will respond with <code class="prettyprint">403: Unauthorized</code> if the numeration can not be deleted</p>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/numbering_series/3412"</span> <span class="se">\</span>
  -X DELETE
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<p><code class="prettyprint">DELETE /numbering_series/:numbering_series_id</code></p>

          <h1 id="analytic-categories"><a name="analytic-categories-section"></a> Analytic categories</h1>

          <h1 id="accounting-categories"><a name="accounting-categories-section"></a> Accounting categories</h1>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attr. name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>prefix</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>name</td>
<td>READ ONLY</td>
</tr>
<tr>
<td>kind</td>
<td>READ ONLY. <code class="prettyprint">income</code>, <code class="prettyprint">expenses</code> or <code class="prettyprint">assets</code></td>
</tr>
</tbody></table>

<aside class="notice">
  Please note that the accounting categories&rsquo; ID is not the same as the accounting number. At Quipu we use several accounting books,
  so two different categories can have the same accounting number if they belong to different accounting books.
  In order to identify an accounting category, like when you are about to create an invoice, please always use its ID.
</aside>

<h2 id="listing-accounting-categories">Listing accounting categories</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/accounting_categories"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 818abe1ea4a1813999a47105892d50f3781320c588fb8cd2927885963e621228"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"234"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Gastos de investigación"</span>,
      <span class="s2">"prefix"</span>: 200,
      <span class="s2">"kind"</span>: <span class="s2">"assets"</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"235"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Desarrollo"</span>,
      <span class="s2">"prefix"</span>: 201,
      <span class="s2">"kind"</span>: <span class="s2">"assets"</span>
      <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"236"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Concesiones administrativas"</span>,
      <span class="s2">"prefix"</span>: 202,
      <span class="s2">"kind"</span>: <span class="s2">"assets"</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"237"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Propiedad industrial"</span>,
      <span class="s2">"prefix"</span>: 203,
      <span class="s2">"kind"</span>: <span class="s2">"assets"</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"238"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Fondo de comercio"</span>,
      <span class="s2">"prefix"</span>: 204,
      <span class="s2">"kind"</span>: <span class="s2">"assets"</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"239"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Derechos de traspaso"</span>,
      <span class="s2">"prefix"</span>: 205,
      <span class="s2">"kind"</span>: <span class="s2">"assets"</span>
    <span class="o">}</span>
  <span class="o">}</span>,

  ...

<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /accounting_categories</code></p>

<h3 id="available-filters">Available filters</h3>

<table><thead>
<tr>
<th>Filter name</th>
<th>Description</th>
<th>Valid values</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>Filter resources by kind</td>
<td><code class="prettyprint">expenses</code>, <code class="prettyprint">income</code>, or <code class="prettyprint">assets</code></td>
<td><code class="prettyprint">/accounting_categories?filter[kind]=expenses</code></td>
</tr>
<tr>
<td>prefix</td>
<td>filter categories with the given accounting numbers</td>
<td>List of prefixes separated by comma</td>
<td><code class="prettyprint">/accounting_categories?filter[prefix]=601,603,608</code></td>
</tr>
</tbody></table>

<h2 id="getting-an-accounting-category">Getting an accounting category</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/accounting_categories/132"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 818abe1ea4a1813999a47105892d50f3781320c588fb8cd2927885963e621228"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"132"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Ventas de mercaderías"</span>,
      <span class="s2">"prefix"</span>: 700,
      <span class="s2">"kind"</span>: <span class="s2">"income"</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /accounting_categories/:accounting_category_id</code></p>

          <h1 id="accounting-subcategories"><a name="accounting-subcategories-section"></a> Accounting subcategories</h1>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attr. name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>suffix</td>
<td>REQUIRED. Must be unique within an accounting category</td>
</tr>
<tr>
<td>name</td>
<td>REQUIRED</td>
</tr>
</tbody></table>

<h2 id="relationships">Relationships</h2>

<table><thead>
<tr>
<th>Relationship name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>accounting_category</td>
<td>REQUIRED</td>
</tr>
</tbody></table>

<h2 id="listing-accounting-subcategories">Listing accounting subcategories</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/accounting_subcategories"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">[{</span>
    <span class="s2">"id"</span>: <span class="s2">"19482"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_subcategories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Oficina"</span>,
      <span class="s2">"suffix"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"id"</span>: <span class="s2">"43"</span>,
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"19483"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_subcategories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Raw"</span>,
      <span class="s2">"suffix"</span>: 2
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"id"</span>: <span class="s2">"43"</span>,
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>, <span class="o">{</span>

  ...

  <span class="o">}]</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /accounting_subcategories</code></p>

<h3 id="available-filters">Available filters</h3>

<p>You can filter accounting subcategories by its accounting category id by passing an array of comma separated ids, for example <code class="prettyprint">GET /accounting_subcategories?filter[accounting_category_id]=43,44,48</code>.</p>

<h2 id="getting-an-accounting-subcategory">Getting an accounting subcategory</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/accounting_subcategories/19482"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"19482"</span>,
    <span class="s2">"type"</span>: <span class="s2">"accounting_subcategories"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"name"</span>: <span class="s2">"Oficina"</span>,
      <span class="s2">"suffix"</span>: 1
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"accounting_category"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"id"</span>: <span class="s2">"43"</span>,
          <span class="s2">"type"</span>: <span class="s2">"accounting_categories"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">GET /accounting_subcategories/:accounting_subcategory_id</code></p>

<h2 id="creating-an-accounting-subcategory">Creating an accounting subcategory</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/accounting_subcategories"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "invoices",
          "attributes": {
            "prefix": 2,
            "name": "Vestuario"
          },
          "relationships": {
            "accounting_category": {
              "data" {
                "id": 43,
                "type": "accounting_categories"
              }
            }
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">POST /accounting_subcategories</code></p>

<h2 id="updatinig-an-accounting-subcategory">Updatinig an accounting subcategory</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/accounting_subcategories/19482"</span> <span class="se">\</span>
  -X PATCH
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -d <span class="s1">'{
        "data": {
          "type": "invoices",
          "attributes": {
            "name": "Transporte"
          }
        }
      }'</span>
</code></pre>

<p><code class="prettyprint">(PUT|PATCH) /accounting_subcategories/:accounting_subcategory_id</code></p>

<h2 id="deleting-an-accounting-subcategory">Deleting an accounting subcategory</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/accounting_subcategories/19482"</span> <span class="se">\</span>
  -X DELETE
  -H <span class="s2">"Authorization: Bearer be32259bd1d0f4d3d02bcc0771b1b507e2b666ba9e9ba3d7c5639e853f722eb4"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
</code></pre>

<p><code class="prettyprint">DELETE /accounting_subcategories/:accounting_subcategory_id</code></p>

          <h1 id="attachments"><a name="attachments-section"></a> Attachments</h1>

<h2 id="attributes">Attributes</h2>

<table><thead>
<tr>
<th>Attr. name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>The url for the file</td>
</tr>
<tr>
<td>small_url</td>
<td>Only if the file is an image. A version of the attachment scaled to fit 500 x 500 px.</td>
</tr>
<tr>
<td>thumbnail_url</td>
<td>Only if the file is an image. A version of the attachment scaled to fit 100 x 100 px.</td>
</tr>
</tbody></table>

<h2 id="relationships">Relationships</h2>

<table><thead>
<tr>
<th>Relationship name</th>
<th>Constraints</th>
</tr>
</thead><tbody>
<tr>
<td>book_entry</td>
<td>REQUIRED when uploading attachments. The invoice, ticket or paysheet that this attachment is related to</td>
</tr>
</tbody></table>

<h2 id="uploading-an-attachment">Uploading an attachment</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/attachments"</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 4cbc2f18d5e7bcfb44f46c5ed72c5e94fd059f7f4d... "</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span> <span class="se">\</span>
  -F <span class="s2">"file=@/path/to/the/file.jpg"</span> <span class="se">\</span>
  -F <span class="s2">"book_entry_id=3308976"</span>
</code></pre>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2311315"</span>,
    <span class="s2">"type"</span>: <span class="s2">"attachments"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"url"</span>: <span class="s2">"uploads/book_entry_attachments/2311315-36eb52a2959af9d2dcbddc356549b125/image.png"</span>,
      <span class="s2">"small_url"</span>: <span class="s2">"uploads/book_entry_attachments/2311315-36eb52a2959af9d2dcbddc356549b125/preview_image.png"</span>,
      <span class="s2">"thumbnail_url"</span>: <span class="s2">"uploads/book_entry_attachments/2311315-36eb52a2959af9d2dcbddc356549b125/thumbnail_image.png"</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"book_entry"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"id"</span>: <span class="s2">"3308976"</span>,
          <span class="s2">"type"</span>: <span class="s2">"invoices"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<p><code class="prettyprint">POST /attachments</code></p>

<aside class="notice">
  Atention: the <code>Content-Type</code> for the request must be <code>multipart/form-data</code>. The <code>Accept</code> header needs to be like any other call.
</aside>

<h2 id="getting-an-attachment">Getting an attachment</h2>

<blockquote>
<p>Example request</p>
</blockquote>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/attachments/2311315"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 4cbc2f18d5e7bcfb44f46c5ed72c5e94fd059f7f4d... "</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

<p><code class="prettyprint">GET /attachments/:id</code></p>

<blockquote>
<p>Example response</p>
</blockquote>
<pre class="highlight shell"><code><span class="o">{</span>
  <span class="s2">"data"</span>: <span class="o">{</span>
    <span class="s2">"id"</span>: <span class="s2">"2311315"</span>,
    <span class="s2">"type"</span>: <span class="s2">"attachments"</span>,
    <span class="s2">"attributes"</span>: <span class="o">{</span>
      <span class="s2">"url"</span>: <span class="s2">"uploads/book_entry_attachments/2311315-36eb52a2959af9d2dcbddc356549b125/image.png"</span>,
      <span class="s2">"small_url"</span>: <span class="s2">"uploads/book_entry_attachments/2311315-36eb52a2959af9d2dcbddc356549b125/preview_image.png"</span>,
      <span class="s2">"thumbnail_url"</span>: <span class="s2">"uploads/book_entry_attachments/2311315-36eb52a2959af9d2dcbddc356549b125/thumbnail_image.png"</span>
    <span class="o">}</span>,
    <span class="s2">"relationships"</span>: <span class="o">{</span>
      <span class="s2">"book_entry"</span>: <span class="o">{</span>
        <span class="s2">"data"</span>: <span class="o">{</span>
          <span class="s2">"id"</span>: <span class="s2">"3308976"</span>,
          <span class="s2">"type"</span>: <span class="s2">"invoices"</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<h2 id="removing-an-attachment">Removing an attachment</h2>

<p><code class="prettyprint">DELETE /attachments/:id</code></p>
<pre class="highlight shell"><code>curl <span class="s2">"https://getquipu.com/attachments/2311315"</span> <span class="se">\</span>
  -X DELETE <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer 4cbc2f18d5e7bcfb44f46c5ed72c5e94fd059f7f4d... "</span> <span class="se">\</span>
  -H <span class="s2">"Accept: application/vnd.quipu.v1+json"</span>
</code></pre>

          <h1 id="todo">TODO</h1>

<ul>
<li>Improve error messages</li>
<li>Add endpoint to send invoices via email</li>
<li>Add endpoints to add attachments to invoices or tickets</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
